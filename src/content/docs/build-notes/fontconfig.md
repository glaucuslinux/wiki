---
title: fontconfig
description: An opinionated LinuxÂ® distribution based on musl libc and toybox
---

- Prefer `autoreconf -vfis` to `./autogen.sh` as the latter requires `gettext`
- Do not remove `src/fcobjshash.gperf.h` as it breaks the build
- `src/fcobjshash.h` does not exist (generated by `gperf`)
- Does not build with `muon`
- Requires `gperf`; `kiss` provides `fcobjshash.h` to remove `gperf` dependency
- The default cache dir is `/var/cache/fontconfig`
- Consider disabling non-scalable fonts (e.g. bitmap fonts)
- Prefer `expat` to `libxml2` as it is smaller (and faster)
  - gentoo purposely dropped `libxml2` support
  - arch and chimera are using `expat` by default
- The default hinting configuration is `slight`
- Do we need to change the default sub-pixel rendering to `rgb` or `noinstall`?
- Do we need to explicitly specify `--with-cache-dir=/var/cache/$nom`
- Void does:
```
# deprecated upstream, but is broken unless 70-no-bitmaps-except-emoji exists in conf.d
rm "$DESTDIR"/usr/share/fontconfig/conf.avail/70-no-bitmaps.conf
ln -s 70-no-bitmaps-except-emoji.conf "$DESTDIR"/usr/share/fontconfig/conf.avail/70-no-bitmaps.conf
```
- Chimera does:
```
self.install_file(
    self.files_path / "70-no-nonscalable.conf",
    "usr/share/fontconfig/conf.avail",
)
# reject bitmap fonts by default, preventing them from being preferred
self.install_link(
    "etc/fonts/conf.d/70-no-nonscalable.conf",
    "../../../usr/share/fontconfig/conf.avail/70-no-nonscalable.conf",
)
```

## References
- https://bugs.gentoo.org/900681
- https://github.com/AerynOS/recipes/blob/2025-05-repo-rebuild/f/fontconfig
- https://github.com/chimera-linux/cports/tree/master/main/fontconfig
- https://gitlab.freedesktop.org/fontconfig/fontconfig/-/issues/356
- https://linuxfromscratch.org/blfs/view/svn/general/fontconfig.html
- https://linuxfromscratch.org/blfs/view/svn/x/tuning-fontconfig.html
